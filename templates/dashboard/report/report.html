{% extends 'partials/base.html' %}
{% load static %}

{% block title %} Báo Cáo Tồn Kho {% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4><i class="fas fa-chart-pie mr-2"></i>Báo Cáo & Thống Kê</h4>
                </div>
            </div>
        </div>
    </div>

    <!-- Hàng chứa các biểu đồ -->
    <div class="row">
        <!-- Biểu đồ 1: Tồn kho sản phẩm -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <canvas id="productQuantityChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Biểu đồ 2: Tỉ lệ xuất kho -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <canvas id="orderDistributionChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}
    <!-- Nạp file JS cho trang báo cáo -->
    <script src="{% static 'js/dashboard/report.js' %}"></script>
    <script>
        // Lấy dữ liệu JSON từ context mà view đã truyền sang
        const productsData = JSON.parse('{{ products_json|safe }}');
        const ordersData = JSON.parse('{{ orders_json|safe }}');

        // Gọi hàm khởi tạo biểu đồ và truyền dữ liệu vào
        initializeReportCharts(productsData, ordersData);
    </script>
{% endblock %}